–ù–∏–∂–µ ‚Äî **—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è, –º–∏–Ω–∏–º–∞–ª—å–Ω–æ-–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `Order` –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫—Ä–∏–ø—Ç–æ-–±–∏—Ä–∂**
(Binance, OKX, Bybit, Coinbase, Kraken), **–∑–∞—Ç–æ—á–µ–Ω–Ω–∞—è –∏–º–µ–Ω–Ω–æ –ø–æ–¥ Market Making / HFT —Å—Ç—Ä–∞—Ç–µ–≥–∏—é**.

–§–æ–∫—É—Å:

* –æ–¥–∏–Ω —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –≤—Å–µ—Ö –±–∏—Ä–∂
* —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ risk
* –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø–æ–ª–µ–π ‚Äú–¥–ª—è UI‚Äù

---

## 1. –ü—Ä–∏–Ω—Ü–∏–ø—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:

* ‚úÖ **ticks / qty** ‚Üí integer
* ‚úÖ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ side / type
* ‚úÖ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π lifecycle
* ‚úÖ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ time semantics
* ‚ùå –Ω–∏–∫–∞–∫–∏—Ö –±–∏—Ä–∂–µ–≤—ã—Ö enum‚Äô–æ–≤
* ‚ùå –Ω–∏–∫–∞–∫–∏—Ö float

---

## 2. –ë–∞–∑–æ–≤—ã–µ enum‚Äô—ã

```cpp
enum class Side : uint8_t {
    Buy  = 0,
    Sell = 1
};

enum class OrderType : uint8_t {
    Limit,
    Market,
    PostOnly
};

enum class TimeInForce : uint8_t {
    GTC,   // good till cancel
    IOC,   // immediate or cancel
    FOK    // fill or kill
};

enum class OrderStatus : uint8_t {
    New,
    Accepted,
    PartiallyFilled,
    Filled,
    Canceled,
    Rejected
};
```

---

## 3. Normalized Order (Strategy-level)

```cpp
struct Order {
    // ---- identity ----
    uint64_t client_order_id;   // generated by strategy
    uint64_t exchange_order_id; // assigned by exchange (0 if unknown)

    // ---- instrument ----
    uint32_t symbol_id;         // internal symbol mapping

    // ---- economics ----
    Side     side;
    OrderType type;
    TimeInForce tif;

    int64_t  price_ticks;       // LIMIT only, tick-aligned
    int32_t  qty;               // original quantity
    int32_t  leaves_qty;        // remaining quantity

    // ---- lifecycle ----
    OrderStatus status;

    // ---- timestamps (ns) ----
    uint64_t ts_create;         // strategy time
    uint64_t ts_exchange;       // exchange accept time
};
```

---

## 4. –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ –ø–æ–ª—è

### 4.1 `client_order_id`

* –Ω—É–∂–µ–Ω –¥–ª—è:

    * cancel / replace
    * reconciliation
    * latency measurement

---

### 4.2 `symbol_id`

* –æ–¥–∏–Ω integer –≤–º–µ—Å—Ç–æ `"BTCUSDT"`, `"XBT/USD"`
* –±—ã—Å—Ç—Ä–µ–µ
* SIMD / cache-friendly

---

### 4.3 `price_ticks` –∏ `qty`

* —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –≤ ticks**
* qty —É–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –∫ **lot size**
* –Ω–∏–∫–∞–∫–∏—Ö `double`

---

### 4.4 `leaves_qty`

* –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è:

    * partial fills
    * inventory
    * queue position model

---

### 4.5 `OrderType + TimeInForce`

* –ø–æ–∫—Ä—ã–≤–∞–µ—Ç:

    * limit
    * market
    * post-only
    * IOC/FOK
* —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è MM

---

### 4.6 Timestamps

* **latency accounting**
* exchange vs strategy clock skew
* PnL attribution

---

## 5. –ß—Ç–æ intentionally –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ

‚ùå commission / fee
‚ùå rebate
‚ùå reduce-only
‚ùå trigger price
‚ùå stop-loss / take-profit
‚ùå margin / leverage

> –≠—Ç–∏ –ø–æ–ª—è:

* –Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –∫–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
* –º–µ—à–∞—é—Ç hot-path
* –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è **–¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏**

---

## 6. –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: Fill (–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç Order)

```cpp
struct Fill {
    uint64_t client_order_id;
    uint64_t exchange_order_id;

    Side     side;
    int64_t  price_ticks;
    int32_t  qty;

    uint64_t ts_exchange;
};
```

---

## 7. –ö–∞–∫ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

```cpp
if (order.status == OrderStatus::PartiallyFilled) {
    inventory +=
        (order.side == Side::Buy)
        ? filled_qty
        : -filled_qty;
}
```

---

## 8. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è ABI

```cpp
struct OrderExt {
    Order base;
    uint32_t flags;   // maker/taker, self-trade-prevention, etc
};
```

---

## 9. –ò—Ç–æ–≥

–≠—Ç–æ **–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π Order**, –∫–æ—Ç–æ—Ä—ã–π:

* –æ–¥–∏–Ω–∞–∫–æ–≤ –¥–ª—è Binance / OKX / Bybit / Coinbase
* –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è Market Making
* –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω
* –±—ã—Å—Ç—Ä—ã–π
* —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ª–æ–≥–∏—á–Ω—ã–π:

* üî• –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å **OrderUpdate / ExecutionReport**
* üî• –ø–æ–∫–∞–∑–∞—Ç—å **exchange adapters ‚Üí Order**
* üî• —Å–æ–±—Ä–∞—Ç—å **end-to-end MM loop**

–°–∫–∞–∂–∏, –∫—É–¥–∞ –∏–¥—ë–º –¥–∞–ª—å—à–µ.
